{"cells":[{"cell_type":"markdown","id":"ZHO18s1uIF1S","metadata":{"id":"ZHO18s1uIF1S"},"source":["# Data Cleaning and Question Definition\n","\n","### 90-800 Exploratory Data Analysis and Visualization with Python\n","### Fall 2022\n","\n","#### Final Project\n","#### Group 6 Section A2: Justin Poser, Madi Zhaksylyk, Merlin Wijaya\n","#### Date: 1 December 2022\n"]},{"cell_type":"markdown","source":["**Dataset Directory**"],"metadata":{"id":"5pS-lmHnkj70"},"id":"5pS-lmHnkj70"},{"cell_type":"code","source":["#shooting_wash_post.csv path\n","Path1 =('/content/drive/MyDrive/EDA Final Project Fall 22 Mini 2 90-800/dataset_1/shootings_wash_post.csv')\n","\n","#us_pop_by_state.csv path\n","Path2 =('/content/drive/MyDrive/EDA Final Project Fall 22 Mini 2 90-800/dataset_1/us_pop_by_state.csv')\n","\n","#geo_export_95684984-3f68-4246-8d40-5116a4312023.shp path\n","Path3 =('/content/drive/MyDrive/EDA Final Project Fall 22 Mini 2 90-800/dataset_1/States 21basic/geo_export_95684984-3f68-4246-8d40-5116a4312023.shp')"],"metadata":{"id":"sg8HlpMgkC98"},"id":"sg8HlpMgkC98","execution_count":null,"outputs":[]},{"cell_type":"markdown","id":"02d606b9","metadata":{"id":"02d606b9"},"source":["### Import Libraries"]},{"cell_type":"code","execution_count":null,"id":"1e7c4da3","metadata":{"id":"1e7c4da3"},"outputs":[],"source":["import numpy as np \n","import pandas as pd \n","import matplotlib.pyplot as plt\n","import seaborn as sns\n","#import geopandas as gpd\n","import plotly as plotly\n","import plotly.graph_objects as go"]},{"cell_type":"code","execution_count":null,"id":"OsnQqkdX6rpp","metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"OsnQqkdX6rpp","outputId":"469e96a4-ded7-49f3-bf64-223749584a88","executionInfo":{"status":"ok","timestamp":1670538740575,"user_tz":300,"elapsed":1229,"user":{"displayName":"Madi Zhaksylyk","userId":"07230619730488381143"}}},"outputs":[{"output_type":"stream","name":"stdout","text":["Drive already mounted at /content/drive; to attempt to forcibly remount, call drive.mount(\"/content/drive\", force_remount=True).\n"]}],"source":["from google.colab import drive\n","drive.mount('/content/drive')"]},{"cell_type":"markdown","id":"402dd43b","metadata":{"id":"402dd43b"},"source":["### Data Cleaning "]},{"cell_type":"markdown","id":"a24d8a53","metadata":{"id":"a24d8a53"},"source":["Load the data into a dataframe called shootings"]},{"cell_type":"code","execution_count":null,"id":"4df410b7","metadata":{"colab":{"base_uri":"https://localhost:8080/","height":635},"id":"4df410b7","outputId":"cc59d4df-c808-414d-ec16-74afb6356ec7","executionInfo":{"status":"ok","timestamp":1670538740576,"user_tz":300,"elapsed":24,"user":{"displayName":"Madi Zhaksylyk","userId":"07230619730488381143"}}},"outputs":[{"output_type":"execute_result","data":{"text/plain":["        id                     name        date manner_of_death       armed  \\\n","3610  3950        Gregory Campfield  2018-08-09            shot         gun   \n","4807  5225       Lance Edward Smith  2019-11-22            shot         gun   \n","342    436           Nephi Arriguin  2015-05-07            shot         NaN   \n","4448  4864        Frankie Feliciano  2019-07-11            shot       knife   \n","5461  5971  Taylor Christian Warner  2020-07-05            shot  toy weapon   \n","1332  1512           Matthew Tucker  2016-05-04            shot       knife   \n","3272  3605            Betty Lemoine  2018-04-11            shot         gun   \n","2770  3078               Eric Higgs  2017-10-29            shot         gun   \n","2787  3104             Marvin Stair  2017-11-03            shot         gun   \n","4141  4568                    TK TK  2019-03-14            shot         gun   \n","\n","       age gender race           city state  signs_of_mental_illness  \\\n","3610  40.0      M    B       Landover    MD                    False   \n","4807  37.0      M    B  Elizabethtown    NC                    False   \n","342   21.0      M    B       Cerritos    CA                    False   \n","4448  33.0      M    H   Jacksonville    FL                    False   \n","5461  30.0      M  NaN         Muncie    IN                     True   \n","1332  18.0      M  NaN       Temecula    CA                    False   \n","3272  71.0      F    W    Winn Parish    LA                    False   \n","2770  46.0      M    B    Tate County    MS                    False   \n","2787  44.0      M  NaN     Batesville    AR                    False   \n","4141  27.0      M  NaN    Federal Way    WA                    False   \n","\n","     threat_level         flee  body_camera  \n","3610        other         Foot        False  \n","4807       attack  Not fleeing        False  \n","342        attack          Car        False  \n","4448       attack  Not fleeing         True  \n","5461       attack          NaN         True  \n","1332        other  Not fleeing        False  \n","3272       attack  Not fleeing        False  \n","2770       attack          Car        False  \n","2787       attack  Not fleeing        False  \n","4141       attack  Not fleeing        False  "],"text/html":["\n","  <div id=\"df-04f1ae0c-6b06-4011-aada-7d6cdd45059b\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>id</th>\n","      <th>name</th>\n","      <th>date</th>\n","      <th>manner_of_death</th>\n","      <th>armed</th>\n","      <th>age</th>\n","      <th>gender</th>\n","      <th>race</th>\n","      <th>city</th>\n","      <th>state</th>\n","      <th>signs_of_mental_illness</th>\n","      <th>threat_level</th>\n","      <th>flee</th>\n","      <th>body_camera</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>3610</th>\n","      <td>3950</td>\n","      <td>Gregory Campfield</td>\n","      <td>2018-08-09</td>\n","      <td>shot</td>\n","      <td>gun</td>\n","      <td>40.0</td>\n","      <td>M</td>\n","      <td>B</td>\n","      <td>Landover</td>\n","      <td>MD</td>\n","      <td>False</td>\n","      <td>other</td>\n","      <td>Foot</td>\n","      <td>False</td>\n","    </tr>\n","    <tr>\n","      <th>4807</th>\n","      <td>5225</td>\n","      <td>Lance Edward Smith</td>\n","      <td>2019-11-22</td>\n","      <td>shot</td>\n","      <td>gun</td>\n","      <td>37.0</td>\n","      <td>M</td>\n","      <td>B</td>\n","      <td>Elizabethtown</td>\n","      <td>NC</td>\n","      <td>False</td>\n","      <td>attack</td>\n","      <td>Not fleeing</td>\n","      <td>False</td>\n","    </tr>\n","    <tr>\n","      <th>342</th>\n","      <td>436</td>\n","      <td>Nephi Arriguin</td>\n","      <td>2015-05-07</td>\n","      <td>shot</td>\n","      <td>NaN</td>\n","      <td>21.0</td>\n","      <td>M</td>\n","      <td>B</td>\n","      <td>Cerritos</td>\n","      <td>CA</td>\n","      <td>False</td>\n","      <td>attack</td>\n","      <td>Car</td>\n","      <td>False</td>\n","    </tr>\n","    <tr>\n","      <th>4448</th>\n","      <td>4864</td>\n","      <td>Frankie Feliciano</td>\n","      <td>2019-07-11</td>\n","      <td>shot</td>\n","      <td>knife</td>\n","      <td>33.0</td>\n","      <td>M</td>\n","      <td>H</td>\n","      <td>Jacksonville</td>\n","      <td>FL</td>\n","      <td>False</td>\n","      <td>attack</td>\n","      <td>Not fleeing</td>\n","      <td>True</td>\n","    </tr>\n","    <tr>\n","      <th>5461</th>\n","      <td>5971</td>\n","      <td>Taylor Christian Warner</td>\n","      <td>2020-07-05</td>\n","      <td>shot</td>\n","      <td>toy weapon</td>\n","      <td>30.0</td>\n","      <td>M</td>\n","      <td>NaN</td>\n","      <td>Muncie</td>\n","      <td>IN</td>\n","      <td>True</td>\n","      <td>attack</td>\n","      <td>NaN</td>\n","      <td>True</td>\n","    </tr>\n","    <tr>\n","      <th>1332</th>\n","      <td>1512</td>\n","      <td>Matthew Tucker</td>\n","      <td>2016-05-04</td>\n","      <td>shot</td>\n","      <td>knife</td>\n","      <td>18.0</td>\n","      <td>M</td>\n","      <td>NaN</td>\n","      <td>Temecula</td>\n","      <td>CA</td>\n","      <td>False</td>\n","      <td>other</td>\n","      <td>Not fleeing</td>\n","      <td>False</td>\n","    </tr>\n","    <tr>\n","      <th>3272</th>\n","      <td>3605</td>\n","      <td>Betty Lemoine</td>\n","      <td>2018-04-11</td>\n","      <td>shot</td>\n","      <td>gun</td>\n","      <td>71.0</td>\n","      <td>F</td>\n","      <td>W</td>\n","      <td>Winn Parish</td>\n","      <td>LA</td>\n","      <td>False</td>\n","      <td>attack</td>\n","      <td>Not fleeing</td>\n","      <td>False</td>\n","    </tr>\n","    <tr>\n","      <th>2770</th>\n","      <td>3078</td>\n","      <td>Eric Higgs</td>\n","      <td>2017-10-29</td>\n","      <td>shot</td>\n","      <td>gun</td>\n","      <td>46.0</td>\n","      <td>M</td>\n","      <td>B</td>\n","      <td>Tate County</td>\n","      <td>MS</td>\n","      <td>False</td>\n","      <td>attack</td>\n","      <td>Car</td>\n","      <td>False</td>\n","    </tr>\n","    <tr>\n","      <th>2787</th>\n","      <td>3104</td>\n","      <td>Marvin Stair</td>\n","      <td>2017-11-03</td>\n","      <td>shot</td>\n","      <td>gun</td>\n","      <td>44.0</td>\n","      <td>M</td>\n","      <td>NaN</td>\n","      <td>Batesville</td>\n","      <td>AR</td>\n","      <td>False</td>\n","      <td>attack</td>\n","      <td>Not fleeing</td>\n","      <td>False</td>\n","    </tr>\n","    <tr>\n","      <th>4141</th>\n","      <td>4568</td>\n","      <td>TK TK</td>\n","      <td>2019-03-14</td>\n","      <td>shot</td>\n","      <td>gun</td>\n","      <td>27.0</td>\n","      <td>M</td>\n","      <td>NaN</td>\n","      <td>Federal Way</td>\n","      <td>WA</td>\n","      <td>False</td>\n","      <td>attack</td>\n","      <td>Not fleeing</td>\n","      <td>False</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-04f1ae0c-6b06-4011-aada-7d6cdd45059b')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-04f1ae0c-6b06-4011-aada-7d6cdd45059b button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-04f1ae0c-6b06-4011-aada-7d6cdd45059b');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":13}],"source":["shootings_all = pd.read_csv(Path1)\n","shootings_all.sample(10)"]},{"cell_type":"markdown","id":"70369e09","metadata":{"id":"70369e09"},"source":["Count the null values in each column"]},{"cell_type":"code","execution_count":null,"id":"427a95a8","metadata":{"id":"427a95a8","colab":{"base_uri":"https://localhost:8080/","height":488},"executionInfo":{"status":"ok","timestamp":1670538740576,"user_tz":300,"elapsed":20,"user":{"displayName":"Madi Zhaksylyk","userId":"07230619730488381143"}},"outputId":"2ac4a0ac-d945-42c6-deca-106fe2ad7f34"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["                         percent_missing\n","race                           10.554755\n","flee                            4.719020\n","age                             4.412824\n","armed                           3.836455\n","gender                          0.018012\n","id                              0.000000\n","name                            0.000000\n","date                            0.000000\n","manner_of_death                 0.000000\n","city                            0.000000\n","state                           0.000000\n","signs_of_mental_illness         0.000000\n","threat_level                    0.000000\n","body_camera                     0.000000"],"text/html":["\n","  <div id=\"df-3ff42447-4e6c-4232-80a9-664a329f9e23\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>percent_missing</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>race</th>\n","      <td>10.554755</td>\n","    </tr>\n","    <tr>\n","      <th>flee</th>\n","      <td>4.719020</td>\n","    </tr>\n","    <tr>\n","      <th>age</th>\n","      <td>4.412824</td>\n","    </tr>\n","    <tr>\n","      <th>armed</th>\n","      <td>3.836455</td>\n","    </tr>\n","    <tr>\n","      <th>gender</th>\n","      <td>0.018012</td>\n","    </tr>\n","    <tr>\n","      <th>id</th>\n","      <td>0.000000</td>\n","    </tr>\n","    <tr>\n","      <th>name</th>\n","      <td>0.000000</td>\n","    </tr>\n","    <tr>\n","      <th>date</th>\n","      <td>0.000000</td>\n","    </tr>\n","    <tr>\n","      <th>manner_of_death</th>\n","      <td>0.000000</td>\n","    </tr>\n","    <tr>\n","      <th>city</th>\n","      <td>0.000000</td>\n","    </tr>\n","    <tr>\n","      <th>state</th>\n","      <td>0.000000</td>\n","    </tr>\n","    <tr>\n","      <th>signs_of_mental_illness</th>\n","      <td>0.000000</td>\n","    </tr>\n","    <tr>\n","      <th>threat_level</th>\n","      <td>0.000000</td>\n","    </tr>\n","    <tr>\n","      <th>body_camera</th>\n","      <td>0.000000</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-3ff42447-4e6c-4232-80a9-664a329f9e23')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-3ff42447-4e6c-4232-80a9-664a329f9e23 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-3ff42447-4e6c-4232-80a9-664a329f9e23');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":14}],"source":["percentages = shootings_all.isnull().sum() * 100 / shootings_all.shape[0] \n","missing_data = pd.DataFrame({'percent_missing': percentages}) \n","missing_data = missing_data.sort_values(by='percent_missing', ascending=False) \n","missing_data"]},{"cell_type":"code","execution_count":null,"id":"c24b6372","metadata":{"id":"c24b6372","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1670538740576,"user_tz":300,"elapsed":18,"user":{"displayName":"Madi Zhaksylyk","userId":"07230619730488381143"}},"outputId":"8cd0b311-5f15-4e4e-b727-a06cf5f9f8a8"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["(5552, 14)"]},"metadata":{},"execution_count":15}],"source":["shootings_all.shape"]},{"cell_type":"code","execution_count":null,"id":"ba27acdc","metadata":{"id":"ba27acdc","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1670538740576,"user_tz":300,"elapsed":14,"user":{"displayName":"Madi Zhaksylyk","userId":"07230619730488381143"}},"outputId":"129df8f1-7336-45b2-8a5a-96fae72a4fea"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["id                         0.0\n","name                       0.0\n","date                       0.0\n","manner_of_death            0.0\n","armed                      0.0\n","age                        0.0\n","gender                     0.0\n","race                       0.0\n","city                       0.0\n","state                      0.0\n","signs_of_mental_illness    0.0\n","threat_level               0.0\n","flee                       0.0\n","body_camera                0.0\n","dtype: float64"]},"metadata":{},"execution_count":16}],"source":["shootings_all.dropna(subset = ['armed', 'age', 'gender', 'race', 'flee'], inplace = True)\n","shootings_all.isna().sum()/shootings_all.shape[0] * 100"]},{"cell_type":"markdown","id":"6a128303","metadata":{"id":"6a128303"},"source":["**Dealing with NAs**\n","1. race: this column have 6 categories and NAs values. We dropped the NAs rows because we can't assign race to these people with no race data \n","\n","Race column description https://github.com/washingtonpost/data-police-shootings/tree/master/v1\n","\n","W: White, non-Hispanic\n","\n","B: Black, non-Hispanic\n","\n","A: Asian\n","\n","N: Native American\n","\n","H: Hispanic\n","\n","O: Other\n","\n","None: unknown\n","\n","2. flee: this column has low percentage of NAs (less than 5%) so we dropped the rows with NAs\n","\n","3. age: this column has low percentage of NAs (less than 5%) so we dropped the rows with NAs\n","\n","4. armed: this column has low percentage of NAs (less than 5%) so we dropped the rows with NAs\n","\n","5. gender: only 0.01% data have NAs, we can just drop these rows"]},{"cell_type":"code","execution_count":null,"id":"df61cc34","metadata":{"id":"df61cc34","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1670538740577,"user_tz":300,"elapsed":11,"user":{"displayName":"Madi Zhaksylyk","userId":"07230619730488381143"}},"outputId":"727d79ab-b2cb-40d5-be9a-1365138f364d"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["(4474, 14)"]},"metadata":{},"execution_count":17}],"source":["shootings_all.shape"]},{"cell_type":"markdown","id":"59193c9d","metadata":{"id":"59193c9d"},"source":["After dropping the rows with NA in necessary columns we still have 4474 rows, which are sufficient to perform analyses."]},{"cell_type":"markdown","id":"63a3b02e","metadata":{"id":"63a3b02e"},"source":["Data conversion"]},{"cell_type":"code","execution_count":null,"id":"1f9fl7iQnlqD","metadata":{"id":"1f9fl7iQnlqD"},"outputs":[],"source":["shootings_all['date'] = pd.to_datetime(shootings_all['date'])\n","shootings_all['manner_of_death'] = shootings_all['manner_of_death'].astype('category')\n","shootings_all['armed'] = shootings_all['armed'].astype('category')\n","shootings_all['gender'] = shootings_all['gender'].astype('category')\n","shootings_all['race'] = shootings_all['race'].astype('category')\n","shootings_all['threat_level'] = shootings_all['threat_level'].astype('category')\n","shootings_all['flee'] = shootings_all['flee'].astype('category')\n"]},{"cell_type":"code","execution_count":null,"id":"_j3mxQLw49DM","metadata":{"id":"_j3mxQLw49DM","scrolled":true,"colab":{"base_uri":"https://localhost:8080/","height":357},"executionInfo":{"status":"ok","timestamp":1670538740577,"user_tz":300,"elapsed":9,"user":{"displayName":"Madi Zhaksylyk","userId":"07230619730488381143"}},"outputId":"eaa34fe9-0a60-48fc-e919-cec31d4c0c8c"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["   id                name       date   manner_of_death       armed   age  \\\n","0   3          Tim Elliot 2015-01-02              shot         gun  53.0   \n","1   4    Lewis Lee Lembke 2015-01-02              shot         gun  47.0   \n","2   5  John Paul Quintero 2015-01-03  shot and Tasered     unarmed  23.0   \n","3   8     Matthew Hoffman 2015-01-04              shot  toy weapon  32.0   \n","4   9   Michael Rodriguez 2015-01-04              shot    nail gun  39.0   \n","\n","  gender race           city state  signs_of_mental_illness threat_level  \\\n","0      M    A        Shelton    WA                     True       attack   \n","1      M    W          Aloha    OR                    False       attack   \n","2      M    H        Wichita    KS                    False        other   \n","3      M    W  San Francisco    CA                     True       attack   \n","4      M    H          Evans    CO                    False       attack   \n","\n","          flee  body_camera  \n","0  Not fleeing        False  \n","1  Not fleeing        False  \n","2  Not fleeing        False  \n","3  Not fleeing        False  \n","4  Not fleeing        False  "],"text/html":["\n","  <div id=\"df-4fa606f2-fe3f-4f92-ba4d-48860cf34368\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>id</th>\n","      <th>name</th>\n","      <th>date</th>\n","      <th>manner_of_death</th>\n","      <th>armed</th>\n","      <th>age</th>\n","      <th>gender</th>\n","      <th>race</th>\n","      <th>city</th>\n","      <th>state</th>\n","      <th>signs_of_mental_illness</th>\n","      <th>threat_level</th>\n","      <th>flee</th>\n","      <th>body_camera</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>3</td>\n","      <td>Tim Elliot</td>\n","      <td>2015-01-02</td>\n","      <td>shot</td>\n","      <td>gun</td>\n","      <td>53.0</td>\n","      <td>M</td>\n","      <td>A</td>\n","      <td>Shelton</td>\n","      <td>WA</td>\n","      <td>True</td>\n","      <td>attack</td>\n","      <td>Not fleeing</td>\n","      <td>False</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>4</td>\n","      <td>Lewis Lee Lembke</td>\n","      <td>2015-01-02</td>\n","      <td>shot</td>\n","      <td>gun</td>\n","      <td>47.0</td>\n","      <td>M</td>\n","      <td>W</td>\n","      <td>Aloha</td>\n","      <td>OR</td>\n","      <td>False</td>\n","      <td>attack</td>\n","      <td>Not fleeing</td>\n","      <td>False</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>5</td>\n","      <td>John Paul Quintero</td>\n","      <td>2015-01-03</td>\n","      <td>shot and Tasered</td>\n","      <td>unarmed</td>\n","      <td>23.0</td>\n","      <td>M</td>\n","      <td>H</td>\n","      <td>Wichita</td>\n","      <td>KS</td>\n","      <td>False</td>\n","      <td>other</td>\n","      <td>Not fleeing</td>\n","      <td>False</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>8</td>\n","      <td>Matthew Hoffman</td>\n","      <td>2015-01-04</td>\n","      <td>shot</td>\n","      <td>toy weapon</td>\n","      <td>32.0</td>\n","      <td>M</td>\n","      <td>W</td>\n","      <td>San Francisco</td>\n","      <td>CA</td>\n","      <td>True</td>\n","      <td>attack</td>\n","      <td>Not fleeing</td>\n","      <td>False</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>9</td>\n","      <td>Michael Rodriguez</td>\n","      <td>2015-01-04</td>\n","      <td>shot</td>\n","      <td>nail gun</td>\n","      <td>39.0</td>\n","      <td>M</td>\n","      <td>H</td>\n","      <td>Evans</td>\n","      <td>CO</td>\n","      <td>False</td>\n","      <td>attack</td>\n","      <td>Not fleeing</td>\n","      <td>False</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-4fa606f2-fe3f-4f92-ba4d-48860cf34368')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-4fa606f2-fe3f-4f92-ba4d-48860cf34368 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-4fa606f2-fe3f-4f92-ba4d-48860cf34368');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":19}],"source":["shootings_all.head()"]},{"cell_type":"markdown","id":"24bc2b45","metadata":{"id":"24bc2b45"},"source":["### Initial visualization as an overview of the story\n","\n","**Q1: What is the statistics of police shooting for each state in United States?**"]},{"cell_type":"markdown","id":"0f342fb2","metadata":{"id":"0f342fb2"},"source":["Group the data by state and total number of deaths for each state, saved as shooting_states dataframe"]},{"cell_type":"code","execution_count":null,"id":"98cb5650","metadata":{"id":"98cb5650","colab":{"base_uri":"https://localhost:8080/","height":1000},"executionInfo":{"status":"ok","timestamp":1670538740747,"user_tz":300,"elapsed":178,"user":{"displayName":"Madi Zhaksylyk","userId":"07230619730488381143"}},"outputId":"0b032ef4-5dc2-4998-8572-e515b02fa65b"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["   State  # of deaths\n","4     CA          636\n","43    TX          393\n","9     FL          302\n","3     AZ          201\n","5     CO          157\n","10    GA          149\n","36    OK          138\n","27    NC          136\n","35    OH          135\n","42    TN          116\n","47    WA          115\n","24    MO          113\n","18    LA           89\n","14    IL           89\n","38    PA           88\n","15    IN           88\n","1     AL           86\n","34    NY           86\n","45    VA           86\n","48    WI           83\n","32    NM           83\n","33    NV           79\n","17    KY           75\n","22    MI           71\n","40    SC           71\n","20    MD           67\n","37    OR           66\n","2     AR           63\n","44    UT           57\n","23    MN           56\n","25    MS           54\n","31    NJ           53\n","16    KS           46\n","49    WV           38\n","13    ID           35\n","0     AK           33\n","19    MA           30\n","12    IA           29\n","26    MT           23\n","11    HI           23\n","29    NE           22\n","21    ME           17\n","6     CT           17\n","41    SD           13\n","7     DC           13\n","50    WY           13\n","30    NH           12\n","28    ND           10\n","8     DE            9\n","46    VT            8\n","39    RI            2"],"text/html":["\n","  <div id=\"df-b0ee9c97-e792-4b27-9db4-7f57408d1a12\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>State</th>\n","      <th># of deaths</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>4</th>\n","      <td>CA</td>\n","      <td>636</td>\n","    </tr>\n","    <tr>\n","      <th>43</th>\n","      <td>TX</td>\n","      <td>393</td>\n","    </tr>\n","    <tr>\n","      <th>9</th>\n","      <td>FL</td>\n","      <td>302</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>AZ</td>\n","      <td>201</td>\n","    </tr>\n","    <tr>\n","      <th>5</th>\n","      <td>CO</td>\n","      <td>157</td>\n","    </tr>\n","    <tr>\n","      <th>10</th>\n","      <td>GA</td>\n","      <td>149</td>\n","    </tr>\n","    <tr>\n","      <th>36</th>\n","      <td>OK</td>\n","      <td>138</td>\n","    </tr>\n","    <tr>\n","      <th>27</th>\n","      <td>NC</td>\n","      <td>136</td>\n","    </tr>\n","    <tr>\n","      <th>35</th>\n","      <td>OH</td>\n","      <td>135</td>\n","    </tr>\n","    <tr>\n","      <th>42</th>\n","      <td>TN</td>\n","      <td>116</td>\n","    </tr>\n","    <tr>\n","      <th>47</th>\n","      <td>WA</td>\n","      <td>115</td>\n","    </tr>\n","    <tr>\n","      <th>24</th>\n","      <td>MO</td>\n","      <td>113</td>\n","    </tr>\n","    <tr>\n","      <th>18</th>\n","      <td>LA</td>\n","      <td>89</td>\n","    </tr>\n","    <tr>\n","      <th>14</th>\n","      <td>IL</td>\n","      <td>89</td>\n","    </tr>\n","    <tr>\n","      <th>38</th>\n","      <td>PA</td>\n","      <td>88</td>\n","    </tr>\n","    <tr>\n","      <th>15</th>\n","      <td>IN</td>\n","      <td>88</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>AL</td>\n","      <td>86</td>\n","    </tr>\n","    <tr>\n","      <th>34</th>\n","      <td>NY</td>\n","      <td>86</td>\n","    </tr>\n","    <tr>\n","      <th>45</th>\n","      <td>VA</td>\n","      <td>86</td>\n","    </tr>\n","    <tr>\n","      <th>48</th>\n","      <td>WI</td>\n","      <td>83</td>\n","    </tr>\n","    <tr>\n","      <th>32</th>\n","      <td>NM</td>\n","      <td>83</td>\n","    </tr>\n","    <tr>\n","      <th>33</th>\n","      <td>NV</td>\n","      <td>79</td>\n","    </tr>\n","    <tr>\n","      <th>17</th>\n","      <td>KY</td>\n","      <td>75</td>\n","    </tr>\n","    <tr>\n","      <th>22</th>\n","      <td>MI</td>\n","      <td>71</td>\n","    </tr>\n","    <tr>\n","      <th>40</th>\n","      <td>SC</td>\n","      <td>71</td>\n","    </tr>\n","    <tr>\n","      <th>20</th>\n","      <td>MD</td>\n","      <td>67</td>\n","    </tr>\n","    <tr>\n","      <th>37</th>\n","      <td>OR</td>\n","      <td>66</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>AR</td>\n","      <td>63</td>\n","    </tr>\n","    <tr>\n","      <th>44</th>\n","      <td>UT</td>\n","      <td>57</td>\n","    </tr>\n","    <tr>\n","      <th>23</th>\n","      <td>MN</td>\n","      <td>56</td>\n","    </tr>\n","    <tr>\n","      <th>25</th>\n","      <td>MS</td>\n","      <td>54</td>\n","    </tr>\n","    <tr>\n","      <th>31</th>\n","      <td>NJ</td>\n","      <td>53</td>\n","    </tr>\n","    <tr>\n","      <th>16</th>\n","      <td>KS</td>\n","      <td>46</td>\n","    </tr>\n","    <tr>\n","      <th>49</th>\n","      <td>WV</td>\n","      <td>38</td>\n","    </tr>\n","    <tr>\n","      <th>13</th>\n","      <td>ID</td>\n","      <td>35</td>\n","    </tr>\n","    <tr>\n","      <th>0</th>\n","      <td>AK</td>\n","      <td>33</td>\n","    </tr>\n","    <tr>\n","      <th>19</th>\n","      <td>MA</td>\n","      <td>30</td>\n","    </tr>\n","    <tr>\n","      <th>12</th>\n","      <td>IA</td>\n","      <td>29</td>\n","    </tr>\n","    <tr>\n","      <th>26</th>\n","      <td>MT</td>\n","      <td>23</td>\n","    </tr>\n","    <tr>\n","      <th>11</th>\n","      <td>HI</td>\n","      <td>23</td>\n","    </tr>\n","    <tr>\n","      <th>29</th>\n","      <td>NE</td>\n","      <td>22</td>\n","    </tr>\n","    <tr>\n","      <th>21</th>\n","      <td>ME</td>\n","      <td>17</td>\n","    </tr>\n","    <tr>\n","      <th>6</th>\n","      <td>CT</td>\n","      <td>17</td>\n","    </tr>\n","    <tr>\n","      <th>41</th>\n","      <td>SD</td>\n","      <td>13</td>\n","    </tr>\n","    <tr>\n","      <th>7</th>\n","      <td>DC</td>\n","      <td>13</td>\n","    </tr>\n","    <tr>\n","      <th>50</th>\n","      <td>WY</td>\n","      <td>13</td>\n","    </tr>\n","    <tr>\n","      <th>30</th>\n","      <td>NH</td>\n","      <td>12</td>\n","    </tr>\n","    <tr>\n","      <th>28</th>\n","      <td>ND</td>\n","      <td>10</td>\n","    </tr>\n","    <tr>\n","      <th>8</th>\n","      <td>DE</td>\n","      <td>9</td>\n","    </tr>\n","    <tr>\n","      <th>46</th>\n","      <td>VT</td>\n","      <td>8</td>\n","    </tr>\n","    <tr>\n","      <th>39</th>\n","      <td>RI</td>\n","      <td>2</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-b0ee9c97-e792-4b27-9db4-7f57408d1a12')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-b0ee9c97-e792-4b27-9db4-7f57408d1a12 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-b0ee9c97-e792-4b27-9db4-7f57408d1a12');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":20}],"source":["shootings_states = shootings_all[['state', 'id']].groupby(['state']).count().reset_index()\n","shootings_states.columns = ['State', '# of deaths']\n","shootings_states.sort_values(by='# of deaths', ascending=False)"]},{"cell_type":"markdown","id":"124c79df","metadata":{"id":"124c79df"},"source":["**We can see that top-5 states with the highest number of deaths from police shootings are southern (south-western) states.**\n","\n","But we need to check as a percentage of population or per 1 million people. We used another dataset to get the population number of each state (us_pop dataframe)."]},{"cell_type":"code","execution_count":null,"id":"d3b4caa2","metadata":{"id":"d3b4caa2","scrolled":true,"colab":{"base_uri":"https://localhost:8080/","height":206},"executionInfo":{"status":"ok","timestamp":1670538740924,"user_tz":300,"elapsed":180,"user":{"displayName":"Madi Zhaksylyk","userId":"07230619730488381143"}},"outputId":"ecc2689e-eb24-4b8e-9367-fe0ce8907f7c"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["   rank         state state_code  2020_census  percent_of_total\n","0   1.0    California         CA     39538223            0.1191\n","1   2.0         Texas         TX     29145505            0.0874\n","2   3.0       Florida         FL     21538187            0.0647\n","3   4.0      New York         NY     20201249            0.0586\n","4   5.0  Pennsylvania         PA     13002700            0.0386"],"text/html":["\n","  <div id=\"df-f3bba48f-d4ff-472b-b9c8-43e94de91ca3\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>rank</th>\n","      <th>state</th>\n","      <th>state_code</th>\n","      <th>2020_census</th>\n","      <th>percent_of_total</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>1.0</td>\n","      <td>California</td>\n","      <td>CA</td>\n","      <td>39538223</td>\n","      <td>0.1191</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>2.0</td>\n","      <td>Texas</td>\n","      <td>TX</td>\n","      <td>29145505</td>\n","      <td>0.0874</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>3.0</td>\n","      <td>Florida</td>\n","      <td>FL</td>\n","      <td>21538187</td>\n","      <td>0.0647</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>4.0</td>\n","      <td>New York</td>\n","      <td>NY</td>\n","      <td>20201249</td>\n","      <td>0.0586</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>5.0</td>\n","      <td>Pennsylvania</td>\n","      <td>PA</td>\n","      <td>13002700</td>\n","      <td>0.0386</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-f3bba48f-d4ff-472b-b9c8-43e94de91ca3')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-f3bba48f-d4ff-472b-b9c8-43e94de91ca3 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-f3bba48f-d4ff-472b-b9c8-43e94de91ca3');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":21}],"source":["us_pop = pd.read_csv(Path2)\n","us_pop.head()"]},{"cell_type":"markdown","id":"b71a46fa","metadata":{"id":"b71a46fa"},"source":["Merged the shootings_state dataframe with the us_pop dataframe, saved as merged_pop dataframe"]},{"cell_type":"code","execution_count":null,"id":"2174b790","metadata":{"id":"2174b790","scrolled":true,"colab":{"base_uri":"https://localhost:8080/","height":206},"executionInfo":{"status":"ok","timestamp":1670538740924,"user_tz":300,"elapsed":7,"user":{"displayName":"Madi Zhaksylyk","userId":"07230619730488381143"}},"outputId":"ab74eaa4-1e95-4b8e-dd61-0af3fbabbe2d"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["  State  # of deaths  rank       state state_code  2020_census  \\\n","0    AK           33  48.0      Alaska         AK       733391   \n","1    AL           86  24.0     Alabama         AL      5024279   \n","2    AR           63  33.0    Arkansas         AR      3011524   \n","3    AZ          201  14.0     Arizona         AZ      7151502   \n","4    CA          636   1.0  California         CA     39538223   \n","\n","   percent_of_total  \n","0            0.0022  \n","1            0.0148  \n","2            0.0091  \n","3            0.0219  \n","4            0.1191  "],"text/html":["\n","  <div id=\"df-503937c8-e622-46ce-9d25-a7ee10da6a54\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>State</th>\n","      <th># of deaths</th>\n","      <th>rank</th>\n","      <th>state</th>\n","      <th>state_code</th>\n","      <th>2020_census</th>\n","      <th>percent_of_total</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>AK</td>\n","      <td>33</td>\n","      <td>48.0</td>\n","      <td>Alaska</td>\n","      <td>AK</td>\n","      <td>733391</td>\n","      <td>0.0022</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>AL</td>\n","      <td>86</td>\n","      <td>24.0</td>\n","      <td>Alabama</td>\n","      <td>AL</td>\n","      <td>5024279</td>\n","      <td>0.0148</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>AR</td>\n","      <td>63</td>\n","      <td>33.0</td>\n","      <td>Arkansas</td>\n","      <td>AR</td>\n","      <td>3011524</td>\n","      <td>0.0091</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>AZ</td>\n","      <td>201</td>\n","      <td>14.0</td>\n","      <td>Arizona</td>\n","      <td>AZ</td>\n","      <td>7151502</td>\n","      <td>0.0219</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>CA</td>\n","      <td>636</td>\n","      <td>1.0</td>\n","      <td>California</td>\n","      <td>CA</td>\n","      <td>39538223</td>\n","      <td>0.1191</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-503937c8-e622-46ce-9d25-a7ee10da6a54')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-503937c8-e622-46ce-9d25-a7ee10da6a54 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-503937c8-e622-46ce-9d25-a7ee10da6a54');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":22}],"source":["merged_pop = shootings_states.merge(us_pop,how='inner', left_on='State', right_on='state_code')\n","merged_pop.head()"]},{"cell_type":"code","execution_count":null,"id":"b20b1173","metadata":{"id":"b20b1173","scrolled":true,"colab":{"base_uri":"https://localhost:8080/","height":1000},"executionInfo":{"status":"ok","timestamp":1670538740925,"user_tz":300,"elapsed":7,"user":{"displayName":"Madi Zhaksylyk","userId":"07230619730488381143"}},"outputId":"98531443-e511-4711-cf41-9a590ebd5065"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["   State           state  # of deaths  2020_census  deaths_per_m\n","0     AK          Alaska           33       733391     44.996462\n","32    NM      New Mexico           83      2117522     39.196759\n","36    OK        Oklahoma          138      3959353     34.854179\n","3     AZ         Arizona          201      7151502     28.105984\n","5     CO        Colorado          157      5773714     27.192202\n","33    NV          Nevada           79      3104614     25.445997\n","50    WY         Wyoming           13       576851     22.536149\n","26    MT         Montana           23      1084225     21.213309\n","49    WV   West Virginia           38      1793716     21.185071\n","2     AR        Arkansas           63      3011524     20.919641\n","18    LA       Louisiana           89      4657757     19.107910\n","13    ID           Idaho           35      1839106     19.030986\n","7     DC              DC           13       689545     18.853012\n","24    MO        Missouri          113      6154913     18.359317\n","25    MS     Mississippi           54      2961279     18.235364\n","44    UT            Utah           57      3205958     17.779397\n","1     AL         Alabama           86      5024279     17.116884\n","42    TN       Tennessee          116      6910840     16.785224\n","17    KY        Kentucky           75      4505836     16.645080\n","4     CA      California          636     39538223     16.085700\n","11    HI          Hawaii           23      1455271     15.804616\n","16    KS          Kansas           46      2937880     15.657549\n","37    OR          Oregon           66      4237256     15.576118\n","47    WA      Washington          115      7705281     14.924829\n","41    SD    South Dakota           13       886667     14.661649\n","48    WI       Wisconsin           83      5893718     14.082791\n","9     FL         Florida          302     21538187     14.021607\n","10    GA         Georgia          149     10711908     13.909754\n","40    SC  South Carolina           71      5118425     13.871455\n","43    TX           Texas          393     29145505     13.484069\n","27    NC  North Carolina          136     10439388     13.027584\n","15    IN         Indiana           88      6785528     12.968777\n","28    ND    North Dakota           10       779094     12.835422\n","21    ME           Maine           17      1362359     12.478356\n","46    VT         Vermont            8       643077     12.440190\n","35    OH            Ohio          135     11799448     11.441213\n","29    NE        Nebraska           22      1961504     11.215883\n","20    MD        Maryland           67      6177224     10.846296\n","45    VA        Virginia           86      8631393      9.963629\n","23    MN       Minnesota           56      5706494      9.813381\n","8     DE        Delaware            9       989948      9.091387\n","12    IA            Iowa           29      3271616      8.864121\n","30    NH   New Hampshire           12      1377529      8.711250\n","22    MI        Michigan           71     10077331      7.045516\n","14    IL        Illinois           89     12801989      6.952045\n","38    PA    Pennsylvania           88     13002700      6.767825\n","31    NJ      New Jersey           53      9288994      5.705677\n","6     CT     Connecticut           17      3605944      4.714438\n","19    MA   Massachusetts           30      7029917      4.267476\n","34    NY        New York           86     20201249      4.257163\n","39    RI    Rhode Island            2      1097379      1.822524"],"text/html":["\n","  <div id=\"df-61d7cc69-893f-4568-ae3b-4abcd9fd9904\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>State</th>\n","      <th>state</th>\n","      <th># of deaths</th>\n","      <th>2020_census</th>\n","      <th>deaths_per_m</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>AK</td>\n","      <td>Alaska</td>\n","      <td>33</td>\n","      <td>733391</td>\n","      <td>44.996462</td>\n","    </tr>\n","    <tr>\n","      <th>32</th>\n","      <td>NM</td>\n","      <td>New Mexico</td>\n","      <td>83</td>\n","      <td>2117522</td>\n","      <td>39.196759</td>\n","    </tr>\n","    <tr>\n","      <th>36</th>\n","      <td>OK</td>\n","      <td>Oklahoma</td>\n","      <td>138</td>\n","      <td>3959353</td>\n","      <td>34.854179</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>AZ</td>\n","      <td>Arizona</td>\n","      <td>201</td>\n","      <td>7151502</td>\n","      <td>28.105984</td>\n","    </tr>\n","    <tr>\n","      <th>5</th>\n","      <td>CO</td>\n","      <td>Colorado</td>\n","      <td>157</td>\n","      <td>5773714</td>\n","      <td>27.192202</td>\n","    </tr>\n","    <tr>\n","      <th>33</th>\n","      <td>NV</td>\n","      <td>Nevada</td>\n","      <td>79</td>\n","      <td>3104614</td>\n","      <td>25.445997</td>\n","    </tr>\n","    <tr>\n","      <th>50</th>\n","      <td>WY</td>\n","      <td>Wyoming</td>\n","      <td>13</td>\n","      <td>576851</td>\n","      <td>22.536149</td>\n","    </tr>\n","    <tr>\n","      <th>26</th>\n","      <td>MT</td>\n","      <td>Montana</td>\n","      <td>23</td>\n","      <td>1084225</td>\n","      <td>21.213309</td>\n","    </tr>\n","    <tr>\n","      <th>49</th>\n","      <td>WV</td>\n","      <td>West Virginia</td>\n","      <td>38</td>\n","      <td>1793716</td>\n","      <td>21.185071</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>AR</td>\n","      <td>Arkansas</td>\n","      <td>63</td>\n","      <td>3011524</td>\n","      <td>20.919641</td>\n","    </tr>\n","    <tr>\n","      <th>18</th>\n","      <td>LA</td>\n","      <td>Louisiana</td>\n","      <td>89</td>\n","      <td>4657757</td>\n","      <td>19.107910</td>\n","    </tr>\n","    <tr>\n","      <th>13</th>\n","      <td>ID</td>\n","      <td>Idaho</td>\n","      <td>35</td>\n","      <td>1839106</td>\n","      <td>19.030986</td>\n","    </tr>\n","    <tr>\n","      <th>7</th>\n","      <td>DC</td>\n","      <td>DC</td>\n","      <td>13</td>\n","      <td>689545</td>\n","      <td>18.853012</td>\n","    </tr>\n","    <tr>\n","      <th>24</th>\n","      <td>MO</td>\n","      <td>Missouri</td>\n","      <td>113</td>\n","      <td>6154913</td>\n","      <td>18.359317</td>\n","    </tr>\n","    <tr>\n","      <th>25</th>\n","      <td>MS</td>\n","      <td>Mississippi</td>\n","      <td>54</td>\n","      <td>2961279</td>\n","      <td>18.235364</td>\n","    </tr>\n","    <tr>\n","      <th>44</th>\n","      <td>UT</td>\n","      <td>Utah</td>\n","      <td>57</td>\n","      <td>3205958</td>\n","      <td>17.779397</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>AL</td>\n","      <td>Alabama</td>\n","      <td>86</td>\n","      <td>5024279</td>\n","      <td>17.116884</td>\n","    </tr>\n","    <tr>\n","      <th>42</th>\n","      <td>TN</td>\n","      <td>Tennessee</td>\n","      <td>116</td>\n","      <td>6910840</td>\n","      <td>16.785224</td>\n","    </tr>\n","    <tr>\n","      <th>17</th>\n","      <td>KY</td>\n","      <td>Kentucky</td>\n","      <td>75</td>\n","      <td>4505836</td>\n","      <td>16.645080</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>CA</td>\n","      <td>California</td>\n","      <td>636</td>\n","      <td>39538223</td>\n","      <td>16.085700</td>\n","    </tr>\n","    <tr>\n","      <th>11</th>\n","      <td>HI</td>\n","      <td>Hawaii</td>\n","      <td>23</td>\n","      <td>1455271</td>\n","      <td>15.804616</td>\n","    </tr>\n","    <tr>\n","      <th>16</th>\n","      <td>KS</td>\n","      <td>Kansas</td>\n","      <td>46</td>\n","      <td>2937880</td>\n","      <td>15.657549</td>\n","    </tr>\n","    <tr>\n","      <th>37</th>\n","      <td>OR</td>\n","      <td>Oregon</td>\n","      <td>66</td>\n","      <td>4237256</td>\n","      <td>15.576118</td>\n","    </tr>\n","    <tr>\n","      <th>47</th>\n","      <td>WA</td>\n","      <td>Washington</td>\n","      <td>115</td>\n","      <td>7705281</td>\n","      <td>14.924829</td>\n","    </tr>\n","    <tr>\n","      <th>41</th>\n","      <td>SD</td>\n","      <td>South Dakota</td>\n","      <td>13</td>\n","      <td>886667</td>\n","      <td>14.661649</td>\n","    </tr>\n","    <tr>\n","      <th>48</th>\n","      <td>WI</td>\n","      <td>Wisconsin</td>\n","      <td>83</td>\n","      <td>5893718</td>\n","      <td>14.082791</td>\n","    </tr>\n","    <tr>\n","      <th>9</th>\n","      <td>FL</td>\n","      <td>Florida</td>\n","      <td>302</td>\n","      <td>21538187</td>\n","      <td>14.021607</td>\n","    </tr>\n","    <tr>\n","      <th>10</th>\n","      <td>GA</td>\n","      <td>Georgia</td>\n","      <td>149</td>\n","      <td>10711908</td>\n","      <td>13.909754</td>\n","    </tr>\n","    <tr>\n","      <th>40</th>\n","      <td>SC</td>\n","      <td>South Carolina</td>\n","      <td>71</td>\n","      <td>5118425</td>\n","      <td>13.871455</td>\n","    </tr>\n","    <tr>\n","      <th>43</th>\n","      <td>TX</td>\n","      <td>Texas</td>\n","      <td>393</td>\n","      <td>29145505</td>\n","      <td>13.484069</td>\n","    </tr>\n","    <tr>\n","      <th>27</th>\n","      <td>NC</td>\n","      <td>North Carolina</td>\n","      <td>136</td>\n","      <td>10439388</td>\n","      <td>13.027584</td>\n","    </tr>\n","    <tr>\n","      <th>15</th>\n","      <td>IN</td>\n","      <td>Indiana</td>\n","      <td>88</td>\n","      <td>6785528</td>\n","      <td>12.968777</td>\n","    </tr>\n","    <tr>\n","      <th>28</th>\n","      <td>ND</td>\n","      <td>North Dakota</td>\n","      <td>10</td>\n","      <td>779094</td>\n","      <td>12.835422</td>\n","    </tr>\n","    <tr>\n","      <th>21</th>\n","      <td>ME</td>\n","      <td>Maine</td>\n","      <td>17</td>\n","      <td>1362359</td>\n","      <td>12.478356</td>\n","    </tr>\n","    <tr>\n","      <th>46</th>\n","      <td>VT</td>\n","      <td>Vermont</td>\n","      <td>8</td>\n","      <td>643077</td>\n","      <td>12.440190</td>\n","    </tr>\n","    <tr>\n","      <th>35</th>\n","      <td>OH</td>\n","      <td>Ohio</td>\n","      <td>135</td>\n","      <td>11799448</td>\n","      <td>11.441213</td>\n","    </tr>\n","    <tr>\n","      <th>29</th>\n","      <td>NE</td>\n","      <td>Nebraska</td>\n","      <td>22</td>\n","      <td>1961504</td>\n","      <td>11.215883</td>\n","    </tr>\n","    <tr>\n","      <th>20</th>\n","      <td>MD</td>\n","      <td>Maryland</td>\n","      <td>67</td>\n","      <td>6177224</td>\n","      <td>10.846296</td>\n","    </tr>\n","    <tr>\n","      <th>45</th>\n","      <td>VA</td>\n","      <td>Virginia</td>\n","      <td>86</td>\n","      <td>8631393</td>\n","      <td>9.963629</td>\n","    </tr>\n","    <tr>\n","      <th>23</th>\n","      <td>MN</td>\n","      <td>Minnesota</td>\n","      <td>56</td>\n","      <td>5706494</td>\n","      <td>9.813381</td>\n","    </tr>\n","    <tr>\n","      <th>8</th>\n","      <td>DE</td>\n","      <td>Delaware</td>\n","      <td>9</td>\n","      <td>989948</td>\n","      <td>9.091387</td>\n","    </tr>\n","    <tr>\n","      <th>12</th>\n","      <td>IA</td>\n","      <td>Iowa</td>\n","      <td>29</td>\n","      <td>3271616</td>\n","      <td>8.864121</td>\n","    </tr>\n","    <tr>\n","      <th>30</th>\n","      <td>NH</td>\n","      <td>New Hampshire</td>\n","      <td>12</td>\n","      <td>1377529</td>\n","      <td>8.711250</td>\n","    </tr>\n","    <tr>\n","      <th>22</th>\n","      <td>MI</td>\n","      <td>Michigan</td>\n","      <td>71</td>\n","      <td>10077331</td>\n","      <td>7.045516</td>\n","    </tr>\n","    <tr>\n","      <th>14</th>\n","      <td>IL</td>\n","      <td>Illinois</td>\n","      <td>89</td>\n","      <td>12801989</td>\n","      <td>6.952045</td>\n","    </tr>\n","    <tr>\n","      <th>38</th>\n","      <td>PA</td>\n","      <td>Pennsylvania</td>\n","      <td>88</td>\n","      <td>13002700</td>\n","      <td>6.767825</td>\n","    </tr>\n","    <tr>\n","      <th>31</th>\n","      <td>NJ</td>\n","      <td>New Jersey</td>\n","      <td>53</td>\n","      <td>9288994</td>\n","      <td>5.705677</td>\n","    </tr>\n","    <tr>\n","      <th>6</th>\n","      <td>CT</td>\n","      <td>Connecticut</td>\n","      <td>17</td>\n","      <td>3605944</td>\n","      <td>4.714438</td>\n","    </tr>\n","    <tr>\n","      <th>19</th>\n","      <td>MA</td>\n","      <td>Massachusetts</td>\n","      <td>30</td>\n","      <td>7029917</td>\n","      <td>4.267476</td>\n","    </tr>\n","    <tr>\n","      <th>34</th>\n","      <td>NY</td>\n","      <td>New York</td>\n","      <td>86</td>\n","      <td>20201249</td>\n","      <td>4.257163</td>\n","    </tr>\n","    <tr>\n","      <th>39</th>\n","      <td>RI</td>\n","      <td>Rhode Island</td>\n","      <td>2</td>\n","      <td>1097379</td>\n","      <td>1.822524</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-61d7cc69-893f-4568-ae3b-4abcd9fd9904')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-61d7cc69-893f-4568-ae3b-4abcd9fd9904 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-61d7cc69-893f-4568-ae3b-4abcd9fd9904');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":23}],"source":["merged_pop['deaths_per_m'] = merged_pop['# of deaths'] / merged_pop['2020_census']*1000000\n","merged_pop = merged_pop[['State', 'state', '# of deaths', '2020_census', 'deaths_per_m']]\n","merged_pop.sort_values(by='deaths_per_m', ascending=False)"]},{"cell_type":"markdown","id":"265ec354","metadata":{"id":"265ec354"},"source":["**By calculating the deaths percentage of population per 1 million people, the ranks change. Surprisingly we get Alaska with the highest number of deaths for police shooting deaths per 1M population. Southern and southwestern states such as New Mexico, Oklahoma, Arizona, Colorado, and Nevada are still on top.**  "]},{"cell_type":"markdown","id":"2b44ef3d","metadata":{"id":"2b44ef3d"},"source":["We visualize this data with geopandas. We used a new shape file to get the geometry for geopandas plot, saved as states dataframe."]},{"cell_type":"code","execution_count":null,"id":"e69f0999","metadata":{"id":"e69f0999","colab":{"base_uri":"https://localhost:8080/","height":188},"executionInfo":{"status":"error","timestamp":1670538741141,"user_tz":300,"elapsed":8,"user":{"displayName":"Madi Zhaksylyk","userId":"07230619730488381143"}},"outputId":"6631567b-7480-4128-b9a1-7c2ddc67cc82"},"outputs":[{"output_type":"error","ename":"NameError","evalue":"ignored","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mNameError\u001b[0m                                 Traceback (most recent call last)","\u001b[0;32m<ipython-input-24-918697a1f6a6>\u001b[0m in \u001b[0;36m<module>\u001b[0;34m\u001b[0m\n\u001b[0;32m----> 1\u001b[0;31m \u001b[0mstates\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mgpd\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mread_file\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mPath3\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m      2\u001b[0m \u001b[0mstates\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mhead\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;31mNameError\u001b[0m: name 'gpd' is not defined"]}],"source":["states = gpd.read_file(Path3)\n","states.head()"]},{"cell_type":"code","execution_count":null,"id":"7MaHoX0Flssh","metadata":{"id":"7MaHoX0Flssh"},"outputs":[],"source":["merged_pop =  merged_pop.rename(columns={'State': 'state_abbr'}) "]},{"cell_type":"markdown","id":"c18864a8","metadata":{"id":"c18864a8"},"source":["Merged merged_pop and states dataframe"]},{"cell_type":"code","execution_count":null,"id":"VWM2kZdUcvP_","metadata":{"id":"VWM2kZdUcvP_"},"outputs":[],"source":["map = states.merge(merged_pop, how='inner', on='state_abbr')\n","map"]},{"cell_type":"code","source":["map['deaths_per_m'] = map['deaths_per_m'].astype(int)"],"metadata":{"id":"9rUhfyJfwJxm"},"id":"9rUhfyJfwJxm","execution_count":null,"outputs":[]},{"cell_type":"code","source":["map['deaths_per_m_group'] = pd.cut(map['deaths_per_m'],  \n","                                        bins=[0,5,10,20,30,40,50],  \n","                                        labels=['0-5','5-10','10-20','20-30','30-40','40-50'])\n","map"],"metadata":{"id":"rMlNsLZ6yNo7"},"id":"rMlNsLZ6yNo7","execution_count":null,"outputs":[]},{"cell_type":"markdown","id":"b00a0079","metadata":{"id":"b00a0079"},"source":["### More initial visualizations\n","**Q2: What are the trends of police shooting based on race in United States?**"]},{"cell_type":"code","source":["shootings_all['month'] = shootings_all['date'].dt.month\n","shootings_all['year'] = shootings_all['date'].dt.year\n","shootings_all['Month_Year'] = shootings_all['date'].dt.to_period('M')"],"metadata":{"id":"hJTmvzsGJO7i"},"id":"hJTmvzsGJO7i","execution_count":null,"outputs":[]},{"cell_type":"code","source":["shootings_all['Month_Year'] = shootings_all.Month_Year.values.astype('datetime64[M]')"],"metadata":{"id":"JkMvNOZHQ39c"},"id":"JkMvNOZHQ39c","execution_count":null,"outputs":[]},{"cell_type":"code","source":["shootings_all.dtypes"],"metadata":{"id":"9XCzKM54RmtH"},"id":"9XCzKM54RmtH","execution_count":null,"outputs":[]},{"cell_type":"code","execution_count":null,"id":"TXzYL3hW1yh0","metadata":{"id":"TXzYL3hW1yh0"},"outputs":[],"source":["trend = pd.DataFrame(shootings_all.groupby(['Month_Year','race'])['id'].count())"]},{"cell_type":"code","source":["trend"],"metadata":{"id":"q8466oVLP8FJ"},"id":"q8466oVLP8FJ","execution_count":null,"outputs":[]},{"cell_type":"code","execution_count":null,"id":"nqPxLE0716CV","metadata":{"id":"nqPxLE0716CV","scrolled":true},"outputs":[],"source":["sns.lineplot(data=trend, x='Month_Year', y='id', hue='race')\n","\n","#sns.lineplot(data=shootings,x='date',y='id',hue='race')\n","#merlin\n","#more granular data with month \n","#add axis\n","#add title"]},{"cell_type":"markdown","id":"4e93b771","metadata":{"id":"4e93b771"},"source":["**The trends for White, Black, and Hispanic have similar patterns, where they all decreased slightly from 2019-2020. The other race didn't have any significant changes from 2015 to 2020.**"]},{"cell_type":"markdown","id":"cROW4pja79dj","metadata":{"id":"cROW4pja79dj"},"source":["###Q3: How does being armed correlate with race and getting shot by police?"]},{"cell_type":"code","source":["shootings_all.replace({'A': 'Asian', 'B': 'Black', 'H': 'Hispanic', 'N': 'Native American', 'O': 'Other', 'W': 'White'}, inplace = True)"],"metadata":{"id":"tXDUOnbK25Rs"},"id":"tXDUOnbK25Rs","execution_count":null,"outputs":[]},{"cell_type":"code","execution_count":null,"id":"017999de","metadata":{"id":"017999de"},"outputs":[],"source":["shootings_all['armed'].unique()"]},{"cell_type":"code","execution_count":null,"id":"e71e869b","metadata":{"id":"e71e869b"},"outputs":[],"source":["shootings_all['armed'].value_counts()"]},{"cell_type":"code","source":[],"metadata":{"id":"bJoJQ4iWb2w5"},"id":"bJoJQ4iWb2w5","execution_count":null,"outputs":[]},{"cell_type":"markdown","id":"fb03a40a","metadata":{"id":"fb03a40a"},"source":["We created a new column 'armed?' with boolean values (True/False). Armed equals to True and Unarmed equals to False. Several listed weapons are not considered dangerous (example: pen, air conditioner, etc) so we went through the list, and categorized them as False or Unarmed."]},{"cell_type":"code","execution_count":null,"id":"b8842f7e","metadata":{"id":"b8842f7e"},"outputs":[],"source":["shootings_all['armed?'] = np.where(shootings_all['armed'].isin(['unarmed', 'stapler', 'air conditioner', 'pen']), False, True)"]},{"cell_type":"code","execution_count":null,"id":"96eec1d1","metadata":{"id":"96eec1d1"},"outputs":[],"source":["shootings_all.sample(10)"]},{"cell_type":"code","source":["shootings_ca = shootings_all.loc[shootings_all['state']=='CA']\n","shootings_fl = shootings_all.loc[shootings_all['state']=='FL']"],"metadata":{"id":"g04sx48fWAj_"},"id":"g04sx48fWAj_","execution_count":null,"outputs":[]},{"cell_type":"markdown","id":"a881a3d3","metadata":{"id":"a881a3d3"},"source":["Group the shootings data based on armed status and race, saved as races dataframe."]},{"cell_type":"code","execution_count":null,"id":"303d9462","metadata":{"scrolled":true,"id":"303d9462","executionInfo":{"status":"error","timestamp":1670539575389,"user_tz":300,"elapsed":188,"user":{"displayName":"Madi Zhaksylyk","userId":"07230619730488381143"}},"colab":{"base_uri":"https://localhost:8080/","height":393},"outputId":"dfe03aa1-62af-4356-b2bf-82bb06f5fac1"},"outputs":[{"output_type":"error","ename":"KeyError","evalue":"ignored","traceback":["\u001b[0;31m---------------------------------------------------------------------------\u001b[0m","\u001b[0;31mKeyError\u001b[0m                                  Traceback (most recent call last)","\u001b[0;32m<ipython-input-25-60ef1b5de7ce>\u001b[0m in \u001b[0;36m<module>\u001b[0;34m\u001b[0m\n\u001b[0;32m----> 1\u001b[0;31m \u001b[0mraces_us\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mshootings_all\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mgroupby\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;34m'armed?'\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;34m'race'\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;34m'id'\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mcount\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mreset_index\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m      2\u001b[0m \u001b[0mraces_us\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;34m'percentage'\u001b[0m\u001b[0;34m]\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0mnp\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mwhere\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mraces_us\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;34m'armed?'\u001b[0m\u001b[0;34m]\u001b[0m \u001b[0;34m==\u001b[0m \u001b[0;32mFalse\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mraces_us\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;34m'id'\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m/\u001b[0m\u001b[0mraces_us\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0mraces_us\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;34m'armed?'\u001b[0m\u001b[0;34m]\u001b[0m \u001b[0;34m==\u001b[0m \u001b[0;32mFalse\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;34m'id'\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0msum\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m*\u001b[0m\u001b[0;36m100\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mraces_us\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;34m'id'\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m/\u001b[0m\u001b[0mraces_us\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0mraces_us\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;34m'armed?'\u001b[0m\u001b[0;34m]\u001b[0m \u001b[0;34m==\u001b[0m \u001b[0;32mTrue\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m[\u001b[0m\u001b[0;34m'id'\u001b[0m\u001b[0;34m]\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0msum\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m*\u001b[0m\u001b[0;36m100\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m      3\u001b[0m \u001b[0mraces_us\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;32m/usr/local/lib/python3.8/dist-packages/pandas/core/frame.py\u001b[0m in \u001b[0;36mgroupby\u001b[0;34m(self, by, axis, level, as_index, sort, group_keys, squeeze, observed, dropna)\u001b[0m\n\u001b[1;32m   7629\u001b[0m         \u001b[0;31m# error: Argument \"squeeze\" to \"DataFrameGroupBy\" has incompatible type\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m   7630\u001b[0m         \u001b[0;31m# \"Union[bool, NoDefault]\"; expected \"bool\"\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m-> 7631\u001b[0;31m         return DataFrameGroupBy(\n\u001b[0m\u001b[1;32m   7632\u001b[0m             \u001b[0mobj\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0mself\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m   7633\u001b[0m             \u001b[0mkeys\u001b[0m\u001b[0;34m=\u001b[0m\u001b[0mby\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;32m/usr/local/lib/python3.8/dist-packages/pandas/core/groupby/groupby.py\u001b[0m in \u001b[0;36m__init__\u001b[0;34m(self, obj, keys, axis, level, grouper, exclusions, selection, as_index, sort, group_keys, squeeze, observed, mutated, dropna)\u001b[0m\n\u001b[1;32m    887\u001b[0m             \u001b[0;32mfrom\u001b[0m \u001b[0mpandas\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mcore\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mgroupby\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mgrouper\u001b[0m \u001b[0;32mimport\u001b[0m \u001b[0mget_grouper\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    888\u001b[0m \u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m--> 889\u001b[0;31m             grouper, exclusions, obj = get_grouper(\n\u001b[0m\u001b[1;32m    890\u001b[0m                 \u001b[0mobj\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    891\u001b[0m                 \u001b[0mkeys\u001b[0m\u001b[0;34m,\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;32m/usr/local/lib/python3.8/dist-packages/pandas/core/groupby/grouper.py\u001b[0m in \u001b[0;36mget_grouper\u001b[0;34m(obj, key, axis, level, sort, observed, mutated, validate, dropna)\u001b[0m\n\u001b[1;32m    860\u001b[0m                 \u001b[0min_axis\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mlevel\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mgpr\u001b[0m \u001b[0;34m=\u001b[0m \u001b[0;32mFalse\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mgpr\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0;32mNone\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    861\u001b[0m             \u001b[0;32melse\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0;32m--> 862\u001b[0;31m                 \u001b[0;32mraise\u001b[0m \u001b[0mKeyError\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mgpr\u001b[0m\u001b[0;34m)\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m    863\u001b[0m         \u001b[0;32melif\u001b[0m \u001b[0misinstance\u001b[0m\u001b[0;34m(\u001b[0m\u001b[0mgpr\u001b[0m\u001b[0;34m,\u001b[0m \u001b[0mGrouper\u001b[0m\u001b[0;34m)\u001b[0m \u001b[0;32mand\u001b[0m \u001b[0mgpr\u001b[0m\u001b[0;34m.\u001b[0m\u001b[0mkey\u001b[0m \u001b[0;32mis\u001b[0m \u001b[0;32mnot\u001b[0m \u001b[0;32mNone\u001b[0m\u001b[0;34m:\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n\u001b[1;32m    864\u001b[0m             \u001b[0;31m# Add key to exclusions\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0;34m\u001b[0m\u001b[0m\n","\u001b[0;31mKeyError\u001b[0m: 'armed?'"]}],"source":["races_us = shootings_all.groupby(['armed?', 'race'])['id'].count().reset_index()\n","races_us['percentage'] = np.where(races_us['armed?'] == False, races_us['id']/races_us[races_us['armed?'] == False]['id'].sum()*100, races_us['id']/races_us[races_us['armed?'] == True]['id'].sum()*100)\n","races_us"]},{"cell_type":"code","execution_count":null,"id":"7859eb45","metadata":{"scrolled":true,"id":"7859eb45"},"outputs":[],"source":["races_us.replace({'A': 'Asian', 'B': 'Black', 'H': 'Hispanic', 'N': 'Native American', 'O': 'Other', 'W': 'White'}, inplace = True)\n","races_us = races_us.round(1)\n","races_us"]},{"cell_type":"code","execution_count":null,"id":"f08e7f6d","metadata":{"scrolled":true,"id":"f08e7f6d"},"outputs":[],"source":["sns.set(rc={'figure.figsize':(12,8)})\n","sns.barplot(data=races_us, x=\"race\", y=\"percentage\", hue='armed?', palette=\"Blues\").set(title='% of deaths from police shooting by race in the US, armed/unarmed')\n","#sns.color_palette('Set1')\n","\n","#Madi\n","#try looking other type of visualization\n","\n","#do with CO and CA state"]},{"cell_type":"markdown","id":"43191321","metadata":{"id":"43191321"},"source":["This visualization shows the number of deaths from police shootings by races as a share of all deaths. Among the unarmed, the percentage of black people is significantly higher than the share of black people among the armed. While among the armed, the share of white people is much higher than the proportion of white victims among the unarmed. "]},{"cell_type":"code","source":[],"metadata":{"id":"4FiNci5S26DM"},"id":"4FiNci5S26DM","execution_count":null,"outputs":[]},{"cell_type":"code","source":["races_fl = shootings_fl.groupby(['armed?', 'race'])['id'].count().reset_index()\n","races_fl['percentage'] = np.where(races_fl['armed?'] == False, races_fl['id']/races_fl[races_fl['armed?'] == False]['id'].sum()*100, races_fl['id']/races_fl[races_fl['armed?'] == True]['id'].sum()*100)\n","races_fl"],"metadata":{"id":"-GrVnSp026l6"},"execution_count":null,"outputs":[],"id":"-GrVnSp026l6"},{"cell_type":"code","source":["sns.set(rc={'figure.figsize':(12,8)})\n","sns.barplot(data=races_fl, x=\"race\", y=\"percentage\", hue='armed?', palette=\"Blues\").set(title='% of deaths from police shooting in Florida by race, armed/unarmed')\n","#sns.color_palette('Set1')"],"metadata":{"id":"_a3tjmI526l6"},"execution_count":null,"outputs":[],"id":"_a3tjmI526l6"},{"cell_type":"code","source":["races_ca = shootings_ca.groupby(['armed?', 'race'])['id'].count().reset_index()\n","races_ca['percentage'] = np.where(races_ca['armed?'] == False, races_ca['id']/races_ca[races_ca['armed?'] == False]['id'].sum()*100, races_ca['id']/races_ca[races_ca['armed?'] == True]['id'].sum()*100)\n","races_ca"],"metadata":{"id":"grXzXpm226l7"},"execution_count":null,"outputs":[],"id":"grXzXpm226l7"},{"cell_type":"code","source":["sns.set(rc={'figure.figsize':(12,8)})\n","sns.barplot(data=races_ca, x=\"race\", y=\"percentage\", hue='armed?', palette=\"Blues\").set(title='% of deaths from police shooting in California by race, armed/unarmed')\n","#sns.color_palette('Set1')"],"metadata":{"id":"dmcjTNSW26l7"},"execution_count":null,"outputs":[],"id":"dmcjTNSW26l7"},{"cell_type":"markdown","source":["\n","\n","```\n","#   \n","```\n","\n","some text on Florida and California"],"metadata":{"id":"7QMtHgor2-iQ"},"id":"7QMtHgor2-iQ"},{"cell_type":"code","source":["races_us1 = shootings_all.groupby(['race', 'armed?'])['id'].count().reset_index()\n","races_us1['percentage'] = races_us1['id'] / races_us1.groupby('race')['id'].transform('sum')*100\n","#races_us1['percentage'] = np.where(races_us['armed?'] == False, races_us['id']/races_us[races_us['armed?'] == False]['id'].sum()*100, races_us['id']/races_us[races_us['armed?'] == True]['id'].sum()*100)\n","#races_us\n","races_us_unarmed = races_us1[races_us1['armed?'] == False]\n","races_us_unarmed"],"metadata":{"id":"ac19CNuvoAmr"},"id":"ac19CNuvoAmr","execution_count":null,"outputs":[]},{"cell_type":"code","source":["x = races_us_unarmed['percentage']\n","y = races_us_unarmed['race']\n"," \n","# getting values against each value of y\n","\n","plt.barh(y, x)\n"," \n","# setting label of y-axis\n","plt.ylabel(\"races\")\n"," \n","# setting label of x-axis\n","plt.xlabel(\"share of unarmed\")\n","plt.title(\"Share of unarmed among victims by races\")\n","plt.show()"],"metadata":{"id":"9XQ0kE2LoJou"},"id":"9XQ0kE2LoJou","execution_count":null,"outputs":[]},{"cell_type":"markdown","source":["In other words, if a person is unarmed, the likelihood of getting shot is higher if they are from a minority racial group."],"metadata":{"id":"MhkKYJN1pZkB"},"id":"MhkKYJN1pZkB"},{"cell_type":"code","source":["races_fl1 = shootings_fl.groupby(['race', 'armed?'])['id'].count().reset_index()\n","races_fl1['percentage'] = races_fl1['id'] / races_fl1.groupby('race')['id'].transform('sum')*100\n","\n","races_fl_unarmed = races_fl1[races_fl1['armed?'] == False]\n","races_fl_unarmed"],"metadata":{"id":"H_XujCDDqUwX"},"id":"H_XujCDDqUwX","execution_count":null,"outputs":[]},{"cell_type":"code","source":["races_ca1 = shootings_ca.groupby(['race', 'armed?'])['id'].count().reset_index()\n","races_ca1['percentage'] = races_ca1['id'] / races_ca1.groupby('race')['id'].transform('sum')*100\n","\n","races_ca_unarmed = races_ca1[races_ca1['armed?'] == False]\n","races_ca_unarmed"],"metadata":{"id":"20_vBusVqwN_"},"id":"20_vBusVqwN_","execution_count":null,"outputs":[]},{"cell_type":"code","source":["x = races_fl_unarmed['percentage']\n","y = races_fl_unarmed['race']\n"," \n","# getting values against each value of y\n","\n","plt.barh(y, x)\n"," \n","# setting label of y-axis\n","plt.ylabel(\"races\")\n"," \n","# setting label of x-axis\n","plt.xlabel(\"share of unarmed\")\n","plt.title(\"Share of unarmed among victims in Florida by races\")\n","plt.show()"],"metadata":{"id":"CSdighSBqwHh"},"id":"CSdighSBqwHh","execution_count":null,"outputs":[]},{"cell_type":"markdown","source":[],"metadata":{"id":"CRUaDUUsrjtW"},"id":"CRUaDUUsrjtW"},{"cell_type":"code","source":["x = races_ca_unarmed['percentage']\n","y = races_ca_unarmed['race']\n"," \n","# getting values against each value of y\n","\n","plt.barh(y, x)\n"," \n","# setting label of y-axis\n","plt.ylabel(\"races\")\n"," \n","# setting label of x-axis\n","plt.xlabel(\"share of unarmed\")\n","plt.title(\"Share of unarmed among victims in California by races\")\n","plt.show()"],"metadata":{"id":"tDhr3OhfqvyD"},"id":"tDhr3OhfqvyD","execution_count":null,"outputs":[]},{"cell_type":"markdown","source":["Conclusions about Florida and California"],"metadata":{"id":"7kek7WQT3Lz7"},"id":"7kek7WQT3Lz7"},{"cell_type":"markdown","id":"456ca46e","metadata":{"id":"456ca46e"},"source":["##Q4: How does age correlate with race and getting shot by police?"]},{"cell_type":"code","source":[],"metadata":{"id":"hxW38CLz2fe8"},"id":"hxW38CLz2fe8","execution_count":null,"outputs":[]},{"cell_type":"code","execution_count":null,"id":"e834656d","metadata":{"scrolled":true,"id":"e834656d"},"outputs":[],"source":["shootings_all['age_group'] = pd.cut(shootings_all.age, bins = [0, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 100], labels = ['0-15', '15-20', '20-25', '25-30', '30-35', '35-40', '40-45', '45-50', '50-55', '55-60', '60+'])\n","shootings_all"]},{"cell_type":"code","execution_count":null,"id":"75e60a1b","metadata":{"id":"75e60a1b"},"outputs":[],"source":["#sns.displot(shootings, x=\"age\", kind=\"kde\")\n","sns.set(rc={'figure.figsize':(12,8)})\n","sns.histplot(data=shootings_all, x=\"age_group\", kde=True).set(title = 'Distribution of deaths from police shootings by age groups')"]},{"cell_type":"code","source":["print(shootings_all['age'].describe())\n","print('Median age for US: ', shootings_all['age'].median())\n","\n","print(shootings_fl['age'].describe())\n","print('Median age for Florida: ', shootings_fl['age'].median())\n","\n","print(shootings_ca['age'].describe())\n","print('Median age for California: ', shootings_ca['age'].median())\n","\n","\n"],"metadata":{"id":"pBHSiEhsh3kr"},"id":"pBHSiEhsh3kr","execution_count":null,"outputs":[]},{"cell_type":"markdown","id":"32a1e007","metadata":{"id":"32a1e007"},"source":["As we can see from the histogram, majority of victims of police shootings were of age 20 to 30. But are there any differences betweeen the race groups?"]},{"cell_type":"code","execution_count":null,"id":"cf995f51","metadata":{"id":"cf995f51"},"outputs":[],"source":["sns.set_theme(style=\"white\", rc={\"axes.facecolor\": (0, 0, 0, 0)})"]},{"cell_type":"code","execution_count":null,"id":"787bbb58","metadata":{"id":"787bbb58"},"outputs":[],"source":["# Initialize the FacetGrid object\n","pal = sns.cubehelix_palette(10, rot=-.25, light=.7)\n","g = sns.FacetGrid(shootings_all, row=\"race\", hue=\"race\", aspect=10, height=1, palette=pal)\n","\n","# Draw the densities in a few steps\n","g.map(sns.kdeplot, \"age\",\n","      bw_adjust=.5, clip_on=False,\n","      fill=True, alpha=1, linewidth=1.5)\n","g.map(sns.kdeplot, \"age\", clip_on=False, color=\"w\", lw=2, bw_adjust=.5)\n","\n","\n","# passing color=None to refline() uses the hue mapping\n","g.refline(y=0, linewidth=2, linestyle=\"-\", color=None, clip_on=False)\n","\n","# Define and use a simple function to label the plot in axes coordinates\n","def label(x, color, label):\n","    ax = plt.gca()\n","    ax.text(0, .2, label, fontweight=\"bold\", color=color,\n","            ha=\"left\", va=\"center\", transform=ax.transAxes)\n","\n","\n","g.map(label, \"age\")\n","\n","# Set the subplots to overlap\n","g.figure.subplots_adjust(hspace=-.15)\n","\n","# Remove axes details that don't play well with overlap\n","g.set_titles(\"\")\n","g.set(yticks=[], ylabel=\"\")\n","g.despine(bottom=True, left=True)\n"]},{"cell_type":"code","source":["# Initialize the FacetGrid object\n","pal = sns.cubehelix_palette(10, rot=-.25, light=.7)\n","g = sns.FacetGrid(shootings_fl, row=\"race\", hue=\"race\", aspect=10, height=1, palette=\"Set2\")\n","\n","# Draw the densities in a few steps\n","g.map(sns.kdeplot, \"age\",\n","      bw_adjust=.5, clip_on=False,\n","      fill=True, alpha=1, linewidth=1.5)\n","g.map(sns.kdeplot, \"age\", clip_on=False, color=\"w\", lw=2, bw_adjust=.5)\n","\n","\n","# passing color=None to refline() uses the hue mapping\n","g.refline(y=0, linewidth=2, linestyle=\"-\", color=None, clip_on=False)\n","\n","# Define and use a simple function to label the plot in axes coordinates\n","def label(x, color, label):\n","    ax = plt.gca()\n","    ax.text(0, .2, label, fontweight=\"bold\", color=color,\n","            ha=\"left\", va=\"center\", transform=ax.transAxes)\n","\n","\n","g.map(label, \"age\")\n","\n","# Set the subplots to overlap\n","g.figure.subplots_adjust(hspace=-.15)\n","\n","# Remove axes details that don't play well with overlap\n","g.set_titles(\"\")\n","g.set(yticks=[], ylabel=\"\")\n","g.despine(bottom=True, left=True)"],"metadata":{"id":"AepV_t3UeUn6"},"id":"AepV_t3UeUn6","execution_count":null,"outputs":[]},{"cell_type":"code","source":["# Initialize the FacetGrid object\n","pal = sns.cubehelix_palette(10, rot=-.25, light=.7)\n","g = sns.FacetGrid(shootings_ca, row=\"race\", hue=\"race\", aspect=10, height=1, palette=\"Set2\")\n","\n","# Draw the densities in a few steps\n","g.map(sns.kdeplot, \"age\",\n","      bw_adjust=.5, clip_on=False,\n","      fill=True, alpha=1, linewidth=1.5)\n","g.map(sns.kdeplot, \"age\", clip_on=False, color=\"w\", lw=2, bw_adjust=.5)\n","\n","\n","# passing color=None to refline() uses the hue mapping\n","g.refline(y=0, linewidth=2, linestyle=\"-\", color=None, clip_on=False)\n","\n","# Define and use a simple function to label the plot in axes coordinates\n","def label(x, color, label):\n","    ax = plt.gca()\n","    ax.text(0, .2, label, fontweight=\"bold\", color=color,\n","            ha=\"left\", va=\"center\", transform=ax.transAxes)\n","\n","\n","g.map(label, \"age\")\n","\n","# Set the subplots to overlap\n","g.figure.subplots_adjust(hspace=-.15)\n","\n","# Remove axes details that don't play well with overlap\n","g.set_titles(\"\")\n","g.set(yticks=[], ylabel=\"\")\n","g.despine(bottom=True, left=True)"],"metadata":{"id":"43uS8C8MebKr"},"id":"43uS8C8MebKr","execution_count":null,"outputs":[]},{"cell_type":"code","source":["#Justin\n","#go in depth for few races\n","#go by particular state (TX, CO)\n","\n","\n","#5% black in CO\n","#14% black in TX\n","\n","#20% hispanic in CO\n","#40% hispanic in TX\n"],"metadata":{"id":"FaHXcdIM6ONB"},"id":"FaHXcdIM6ONB","execution_count":null,"outputs":[]},{"cell_type":"markdown","id":"fbbfe3d0","metadata":{"id":"fbbfe3d0"},"source":["Age distributions across races basically overlap. However, we see that the number of victims in the age groups up to 30 from Black and Hispanic backgrounds is significantly higher than of white rice.This shows how Black and Hispanic young adults may have been in more disadvantageous environments (crime). This might be due to the lack of opportunities for these minorities, involvement in crimes and some amount of racial bias, too. On the other hand, starting from ages 30-35, the share of white victims is higher compared to that of Black and Hispanic people, meaning middle aged and above minorities lead a much safer life than their white counterparts."]},{"cell_type":"markdown","id":"aeb7b39e","metadata":{"id":"aeb7b39e"},"source":["# Summary\n","Q1: What is the statistics of police shooting for each state in United States?\n","\n","The five states with the highest number of deaths from police shootings are southern (south-western) states. By calculating the deaths percentage of population or per 1 million people, the ranks change. Surprisingly we get Alaska with the highest number of deaths for police shooting deaths per 1M population. Southern and southwestern states such as New Mexico, Oklahoma, Arizona, Colorado, and Nevada are still on top.  \n","\n","Q2: What are the trends of police shooting based on race in United States?\n","The trends for White, Black, and Hispanic have similar patterns, where they all decreased slightly from 2019-2020. The other race didn't have any significant changes from 2015 to 2020.\n","\n","Q3: How does being armed correlate with race and getting shot by police?\n","Among the unarmed, the percentage of black people is significantly higher than the share of blacks among the armed.\n","\n","Q4: How does age correlate with race and getting shot by police?\n","\n","Majority of victims of police shootings were of age 20 to 30.\n","Age distributions across races basically overlap. However, the number of victims in the age groups up to 30 from Black and Hispanic backgrounds is significantly higher than of white rice. This shows how Black and Hispanic young adults may have been in more disadvantageous environments (crime). This might be due to the lack of opportunities for these minorities, involvement in crimes and some amount of racial bias, too. On the other hand, starting from ages 30-35, the share of white victims is higher compared to that of Black and Hispanic people, meaning middle aged and above minorities lead a much safer life than their white counterparts.\n","\n"]},{"cell_type":"markdown","source":["the story:\n","are there any differences in how police treats people in different states from age, gender, armed"],"metadata":{"id":"FBD2mZP69B--"},"id":"FBD2mZP69B--"},{"cell_type":"markdown","id":"22d1b893","metadata":{"id":"22d1b893"},"source":["# References\n","1. EDA Lecture slides\n","2. https://geopandas.org/en/stable/gallery/index.html\n","3. http://seaborn.pydata.org/examples/index.html\n"]},{"cell_type":"markdown","source":["# Dataset\n","Police shooting data:\n","https://www.google.com/url?q=https://www.kaggle.com/datasets/jpmiller/police-violence-in-the-us&sa=D&source=docs&ust=1669933140701989&usg=AOvVaw3BRC1HHSzlDXf9sKTInKag\n","\n","US population for each state:\n","https://www.kaggle.com/datasets/alexandrepetit881234/us-population-by-state\n","\n","Geopandas US State border:\n","https://alicia.data.socrata.com/Government/States-21basic/jhnu-yfrj"],"metadata":{"id":"LHmpVOnDje_n"},"id":"LHmpVOnDje_n"},{"cell_type":"code","source":["# https://medium.com/kenlok/how-to-create-sankey-diagrams-from-dataframes-in-python-e221c1b4d6b0\n","\n","def genSankey(df, cat_cols=[], value_cols='', title='Sankey Diagram'):\n","    # maximum of 6 value cols -> 6 colors\n","    colorPalette = ['#4B8BBE','#306998','#FFE873','#FFD43B','#646464']\n","    labelList = []\n","    colorNumList = []\n","    for catCol in cat_cols:\n","        labelListTemp =  list(set(df[catCol].values))\n","        colorNumList.append(len(labelListTemp))\n","        labelList = labelList + labelListTemp\n","        \n","    # remove duplicates from labelList\n","    labelList = list(dict.fromkeys(labelList))\n","    \n","    # define colors based on number of levels\n","    colorList = []\n","    for idx, colorNum in enumerate(colorNumList):\n","        colorList = colorList + [colorPalette[idx]]*colorNum\n","        \n","    # transform df into a source-target pair\n","    for i in range(len(cat_cols)-1):\n","        if i==0:\n","            sourceTargetDf = df[[cat_cols[i], cat_cols[i+1], value_cols]]\n","            sourceTargetDf.columns = ['source', 'target', 'count']\n","        else:\n","            tempDf = df[[cat_cols[i],cat_cols[i+1],value_cols]]\n","            tempDf.columns = ['source', 'target', 'count']\n","            sourceTargetDf = pd.concat([sourceTargetDf,tempDf])\n","        sourceTargetDf = sourceTargetDf.groupby(['source', 'target']).agg({'count':'sum'}).reset_index()\n","        \n","    # add index for source-target pair\n","    sourceTargetDf['sourceID'] = sourceTargetDf['source'].apply(lambda x: labelList.index(x))\n","    sourceTargetDf['targetID'] = sourceTargetDf['target'].apply(lambda x: labelList.index(x))\n","    \n","    # creating the sankey diagram\n","    data = dict(\n","        type='sankey',\n","        node = dict(\n","          pad = 15,\n","          thickness = 20,\n","          line = dict(\n","            color = \"black\",\n","            width = 0.5\n","          ),\n","          label = labelList,\n","          color = colorList\n","        ),\n","        link = dict(\n","          source = sourceTargetDf['sourceID'],\n","          target = sourceTargetDf['targetID'],\n","          value = sourceTargetDf['count']\n","        )\n","      )\n","    \n","    layout =  dict(\n","        title = title,\n","        font = dict(size = 10)\n","    )\n","       \n","    fig = dict(data=[data], layout=layout)\n","    return fig\n","  \n","fig = genSankey(df=shootings_all, cat_cols=[\"state\", \"race\", \"armed\"], value_cols=\"id\", title=\"Sankey Diagram\")\n","plotly.plot(fig, validate=False)"],"metadata":{"id":"Fn-kcMmx3g1H"},"id":"Fn-kcMmx3g1H","execution_count":null,"outputs":[]},{"cell_type":"code","execution_count":null,"id":"0ACQbLYEd8kk","metadata":{"id":"0ACQbLYEd8kk"},"outputs":[],"source":["fig, ax = plt.subplots(1, 1, figsize=(20,20))\n","map.apply(lambda x: ax.annotate(s=x.state_abbr, xy=x.geometry.centroid.coords[0], ha='center', fontsize=9),axis=1);\n","map.plot(column='deaths_per_m_group',\n","         cmap='OrRd',\n","         ax=ax,\n","         edgecolor='k',\n","         linewidth = 0.3, \n","         categorical=True,\n","         legend=True,\n","         legend_kwds={'loc': 'center left', 'bbox_to_anchor':(1,0.5)})\n","#merlin:\n","#add title\n","#add axis"]}],"metadata":{"colab":{"provenance":[{"file_id":"1QTtz7U83n72Y7ItporVXFAC6TTpTm3ip","timestamp":1670463859608}]},"kernelspec":{"display_name":"Python 3 (ipykernel)","language":"python","name":"python3"},"language_info":{"codemirror_mode":{"name":"ipython","version":3},"file_extension":".py","mimetype":"text/x-python","name":"python","nbconvert_exporter":"python","pygments_lexer":"ipython3","version":"3.9.12"}},"nbformat":4,"nbformat_minor":5}